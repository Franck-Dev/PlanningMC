{% extends 'base.html.twig' %}

{% form_theme formDemande 'bootstrap_4_layout.html.twig'%}

{% block title %}Modification d'une demande de polymérisation{% endblock %}

{% block body %}

	<h1>Demande de polymérisations ✅</h1>
	<div class="d-flex align-items-center justify-content-center">
		{{ form_start(formDemande) }}
		<div class="form-row">
			<div class="form-group col-md-4">
				{{form_row(formDemande.cycle, {'attr' : {'placeholder' : "Nom de la polymérisation", 'readonly' : true }}) }}
			</div>
			<div class="form-group col-md-8">
				{{form_row(formDemande.ListOF, {'attr' : {'placeholder' : "Sélectionner les OF" }}) }}
			</div>
		</div>
		<div class="form-row align-items-center">
			<div class="form-group col-md-4">
				{{form_row(formDemande.date_propose, {'attr' : {'placeholder' : "Proposer une date", 'readonly' : true }}) }}
			</div>
			<div class="form-group col-md-3">
				{{form_row(formDemande.heure_propose, {'attr' : {'placeholder' : "Proposer une horaire", 'readonly' : true }}) }}
			</div>
			<div class="form-group col-md-5">
				{{form_row(formDemande.Reccurance, {'attr' : {'placeholder' : "True ou False", 'readonly' : true }}) }}
			</div>
		</div>
		<div class="form-group">
			{{form_row(formDemande.commentaires, {'attr' : {'placeholder' : "Entrez vos commentaires si besoin" }})}}
		</div>
		<div class="form-group">
			{{form_row(formDemande.outillages, {'attr' : {'placeholder' : "Entrez les outillages si besoin" }})}}
		</div>
		<div class="form-group">
				<button type="submit" class="btn btn-warning">
					Modifier la Demande
				</button>
		</div>
		{{ form_end(formDemande) }}
	</div>
{% endblock %}

{% block javascripts %}
<script src="{{ asset('build/jquery.min.js') }}"></script>
<script type="text/javascript">
var $cycle = $('#demandes_cycle');
var $datW = $('#demandes_date_propose');
var $heurW = $('#demandes_heure_propose');

// When sport gets selected ...
$cycle.change(function() {
  // ... retrieve the corresponding form.
  var $form = $(this).closest('form');
  // Simulate form data, but only include the selected sport value.
  var data = {};
  data[$cycle.attr('name')] = $cycle.val();
  data[$datW.attr('name')] = $datW.val();
  data[$heurW.attr('name')] = $heurW.val();
  // Submit data via AJAX to the form's action path.
  $.ajax({
    url : $form.attr('action'),
    type: $form.attr('method'),
    data : data,
    complete: function(html) {
      // Replace current position field ...
      $('#demandes_ListOF').replaceWith(
        // ... with the returned one from the AJAX response.
        $(html.responseText).find('#demandes_ListOF')
      );
      // Position field now displays the appropriate positions.
    }
  });
});
	
</script>
{% endblock %}